
---
# Connect to existing EC2 Instance
- name: Prep EC2 Instance
  hosts: all
  gather_facts: false
  connection: local
  tasks:
    # - name: Update and upgrade apt packages
    #   become: true
    #   apt:
    #     upgrade: yes
    #     update_cache: yes
        
    # - name: Install pip3
    #   apt:
    #     name: python3-pip

    - name: Pip3 Installation
      command: pip3 install virtualenv
    
    - name: Create Project Folder
      become: true
      file:
        path: /flaskproject
        state: directory
    
    - name: VirtualEnv Installation
      command: cd flaskproject
      command: virtualenv venv --python=python3
      
    - name: Venv Power-Up  
      command: . venv/bin/activate
      command: pip install Flask

    - name: Flask App Transfer
      copy:
        src: main.py
        dest: ~/flaskproject
    